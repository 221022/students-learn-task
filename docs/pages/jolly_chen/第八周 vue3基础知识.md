## 新特性

- 向后兼容
- 新特性
- breaking change
- 性能提升
  - 大小 -41%
  - 初次渲染快 +51%
  - 更新 +133%
  - 内存减少 -54%
- typescript 支持

## Composition API

为什么

- 随着功能的增长，复杂组件代码难以维护

  - Vue2 api 通过一些列的 object 组织代码，缺少一种比较干净的在多个组件之间提取和复用的机制

    ```vue
    // vue2 的实现一个复杂功能，代码可能会很分散
    export default {
    	data {
    		// 复杂功能1的数据
    		// 复杂功能2的数据
    	},
    	methods: {
    		// 复杂功能1的实现方法
    		// 复杂功能2的实现方法
    	},
    	computed: {
    		// 复杂功能1
    		// 复杂功能2
      },
    	filters: {
    		// ...
      }
    }
    // 修改一个功能，可能就要在文件中修改 data, methods, computed, 甚至 filter 等
    ```

  - 使用 mixin 解决复用的问题

    - 不知道mixin暴露的对象中的数据是什么，方法是什么、返回是什么。对象是有一定封闭性的。
      - mixin中同样会有 data、computed、methods等，逻辑依然会分散
    - 命名冲突导致覆盖问题

- vue2 对 Typescript 的支持有局限

解决方法，使用函数

- 按逻辑组织代码，一个功能对应一个函数，代码组织更集中
- 在普通情况下，函数使用的参数、返回值更易查找。
- 在 ts 的加持下，函数参数和返回值的提示更友好。
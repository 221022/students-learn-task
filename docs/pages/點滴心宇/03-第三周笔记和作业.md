# 大厂做项目的流程
![项目流程](./images/第三周/大厂做项目的流程.jpg '项目流程')

# 脚手架需求分析
## 痛点分析
![痛点分析](./images/第三周/痛点分析.jpg '痛点分析')
痛点分析: 
* 创建项目/组件时，存在大量重复代码拷贝：快速复用已有沉淀  
* 协同开发时，由于git操作不规范，导致分支混乱，操作耗时：制定标准的git操作规范并集成到脚手架
* 发布上线时，容易出现各种错误：制定标准的上线流程和规范并集成到脚手架

## 需求分析
* 通用的研发脚手架
* 通用的项目/组件创建能力

   + 模板支持定制
   + 模板支持快速接入，极地的接入成本

* 通用个的项目/组件发布能力

  + 发布过程自动完成标准的git操作
  + 发布成功后自动删除开发分支并创建tag
  + 发布后自动完成云构建、OSS上传、CDN上传、域名绑定
  + 发布过程支持测试/正式两种模式
---
# winbridge-cli 脚手架架构设计图
![架构设计图](./images/第三周/winbridge-cli架构设计图pro.jpg '架构设计图')
## 核心模块
* 脚手架

   + 脚手架核心框架
   + 初始化体系
   + 标准git操作体系
   + 发布体系

* 服务
   
   + OPEN API
   + WebSocket

* 支撑体系

   + 本地缓存
   + 模板库
   + 数据体系
   + 代码仓库
   + 资源体系
   + 远程缓存体系

# 脚手架拆包策略
## 拆包结果
* 核心流程: core
* 命令: commands

   + 初始化
   + 发布
   + 清除缓存

* 模型层: models
   
   + Command 命令
   + Project 项目
   + Component 组件
   + Npm 模块
   + Git 仓库

* 支撑模块: utils

  + Git 操作
  + 云构建
  + 工具方法
  + API 请求
  + Git API

## 拆分原则
根据模块的功能拆分: 

* 核心模块: core
* 命令模块: commands
* 模型模块: models
* 工具模块: utils

---

# core模块技术方案
## 命令执行流程
* 准备阶段
* 命令注册
* 命令执行

## 涉及技术点
### 核心库
* import-local
* commander

### 工具库
* npmlog
* fs-extra
* semver
* colors
* user-home
* dotenv
* root-check

